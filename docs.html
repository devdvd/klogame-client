<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KloGame API Dokumentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --bg: #0f172a;
            --bg-light: #1e293b;
            --bg-lighter: #334155;
            --text: #e2e8f0;
            --text-dim: #94a3b8;
            --border: #334155;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --code-bg: #1e293b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        nav {
            width: 280px;
            background: var(--bg-light);
            border-right: 1px solid var(--border);
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            padding: 2rem 0;
        }

        nav h1 {
            padding: 0 1.5rem 1rem;
            font-size: 1.5rem;
            color: var(--primary);
            border-bottom: 2px solid var(--border);
            margin-bottom: 1.5rem;
        }

        nav ul {
            list-style: none;
        }

        nav > ul > li {
            margin-bottom: 0.5rem;
        }

        nav a {
            display: block;
            padding: 0.5rem 1.5rem;
            color: var(--text-dim);
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        nav a:hover {
            color: var(--text);
            background: var(--bg-lighter);
            border-left-color: var(--primary);
        }

        nav a.active {
            color: var(--primary);
            background: var(--bg-lighter);
            border-left-color: var(--primary);
        }

        nav ul ul {
            margin-left: 1rem;
            margin-top: 0.25rem;
        }

        nav ul ul a {
            font-size: 0.9rem;
            padding: 0.4rem 1.5rem;
        }

        /* Main Content */
        main {
            flex: 1;
            padding: 3rem 4rem;
            max-width: 1200px;
        }

        section {
            margin-bottom: 4rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        h2 {
            font-size: 2rem;
            margin: 2.5rem 0 1rem;
            color: var(--text);
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
        }

        h3 {
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
            color: var(--text);
        }

        h4 {
            font-size: 1.2rem;
            margin: 1.5rem 0 0.75rem;
            color: var(--text-dim);
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-dim);
        }

        a {
            color: var(--primary);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Code Blocks */
        pre {
            background: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            color: #e2e8f0;
        }

        p code, li code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.85rem;
            color: var(--secondary);
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: var(--bg-light);
            border-radius: 8px;
            overflow: hidden;
        }

        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--bg-lighter);
            color: var(--text);
            font-weight: 600;
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .badge.get {
            background: var(--success);
            color: white;
        }

        .badge.post {
            background: var(--primary);
            color: white;
        }

        .badge.free {
            background: var(--success);
            color: white;
        }

        .badge.premium {
            background: var(--warning);
            color: white;
        }

        .badge.seasonal {
            background: var(--secondary);
            color: white;
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0 1rem 2rem;
            color: var(--text-dim);
        }

        li {
            margin: 0.5rem 0;
        }

        /* Endpoint Cards */
        .endpoint {
            background: var(--bg-light);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .endpoint-header h3 {
            margin: 0;
            margin-left: 0.5rem;
        }

        /* Info Boxes */
        .info-box {
            background: var(--bg-light);
            border-left: 4px solid var(--primary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .info-box.success {
            border-left-color: var(--success);
        }

        .info-box.warning {
            border-left-color: var(--warning);
        }

        /* Responsive */
        @media (max-width: 968px) {
            nav {
                width: 240px;
            }

            main {
                padding: 2rem;
            }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            nav {
                width: 100%;
                height: auto;
                position: relative;
                border-right: none;
                border-bottom: 1px solid var(--border);
            }

            main {
                padding: 1.5rem;
            }
        }

        /* Syntax Highlighting */
        .keyword { color: #c792ea; }
        .string { color: #c3e88d; }
        .function { color: #82aaff; }
        .comment { color: #636d83; font-style: italic; }
        .number { color: #f78c6c; }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <h1>ðŸš½ KloGame</h1>
            <ul>
                <li><a href="#api" class="nav-link">API Spezifikation</a>
                    <ul>
                        <li><a href="#api-endpoints" class="nav-link">Endpoints</a></li>
                        <li><a href="#api-models" class="nav-link">Data Models</a></li>
                        <li><a href="#api-editions" class="nav-link">VerfÃ¼gbare Editionen</a></li>
                    </ul>
                </li>
                <li><a href="#setup" class="nav-link">Client Setup</a>
                    <ul>
                        <li><a href="#setup-vanilla" class="nav-link">Vanilla HTML/JS</a></li>
                        <li><a href="#setup-typescript" class="nav-link">TypeScript</a></li>
                        <li><a href="#setup-react" class="nav-link">React</a></li>
                        <li><a href="#setup-map" class="nav-link">Map Integration</a></li>
                    </ul>
                </li>
                <li><a href="#types" class="nav-link">TypeScript Types</a>
                    <ul>
                        <li><a href="#types-edition" class="nav-link">Edition Types</a></li>
                        <li><a href="#types-analytics" class="nav-link">Analytics Types</a></li>
                        <li><a href="#types-client" class="nav-link">Client Class</a></li>
                    </ul>
                </li>
            </ul>
        </nav>

        <main>
            <!-- API SECTION -->
            <section id="api">
                <h1>KloGame API Spezifikation</h1>
                <p>Version: 1.0.0 | Base URL: <code>http://localhost:3000</code></p>

                <div class="info-box success">
                    <strong>âœ… Keine Authentifizierung erforderlich</strong><br>
                    Alle Endpoints sind Ã¶ffentlich zugÃ¤nglich. CORS ist fÃ¼r alle Origins aktiviert.
                </div>

                <h2 id="api-endpoints">Endpoints</h2>

                <!-- Health Check -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="badge get">GET</span>
                        <h3>/health</h3>
                    </div>
                    <p>Health check endpoint to verify server status.</p>
                    <strong>Response 200 OK:</strong>
                    <pre><code>{
  "status": "healthy",
  "timestamp": "2024-11-10T15:30:00.000Z"
}</code></pre>
                </div>

                <!-- API Info -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="badge get">GET</span>
                        <h3>/</h3>
                    </div>
                    <p>Returns API information and available endpoints.</p>
                    <strong>Response 200 OK:</strong>
                    <pre><code>{
  "name": "KloGame API",
  "version": "1.0.0",
  "status": "running",
  "endpoints": {
    "editions": "/api/editions",
    "edition_details": "/api/editions/:id",
    "edition_download": "/api/editions/:id/download",
    "analytics_track": "/api/analytics/track (POST)",
    "analytics_stats": "/api/analytics/stats",
    "health": "/health"
  }
}</code></pre>
                </div>

                <!-- List Editions -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="badge get">GET</span>
                        <h3>/api/editions</h3>
                    </div>
                    <p>Returns metadata for all available editions (without location data).</p>
                    <strong>Response 200 OK:</strong>
                    <pre><code>{
  "editions": [
    {
      "id": "bundesliga-2024-25",
      "name": "Bundesliga 2024/25",
      "description": "Alle 18 Stadien der Bundesliga Saison 2024/25",
      "type": "free",
      "version": "1.0.0",
      "icon": "âš½",
      "unlock_conditions": {
        "payment_required": false,
        "date_range": null,
        "requires_editions": []
      },
      "parent_editions": ["bundeslaender", "deutschland", "europa"],
      "locations_count": 18
    }
  ]
}</code></pre>
                </div>

                <!-- Get Edition Details -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="badge get">GET</span>
                        <h3>/api/editions/:id</h3>
                    </div>
                    <p>Returns detailed metadata for a specific edition (without locations).</p>
                    <strong>Parameters:</strong>
                    <ul>
                        <li><code>id</code> (path) - Edition ID (e.g., <code>bundesliga-2024-25</code>)</li>
                    </ul>
                    <strong>Response 200 OK:</strong>
                    <pre><code>{
  "id": "bundesliga-2024-25",
  "name": "Bundesliga 2024/25",
  "description": "Alle 18 Stadien der Bundesliga Saison 2024/25",
  "type": "free",
  "version": "1.0.0",
  "icon": "âš½",
  "unlock_conditions": {
    "payment_required": false,
    "date_range": null,
    "requires_editions": []
  },
  "parent_editions": ["bundeslaender", "deutschland", "europa"],
  "locations_count": 18
}</code></pre>
                </div>

                <!-- Download Edition -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="badge get">GET</span>
                        <h3>/api/editions/:id/download</h3>
                    </div>
                    <p>Downloads complete edition including all locations. Use this to get the full data for the client.</p>
                    <strong>Parameters:</strong>
                    <ul>
                        <li><code>id</code> (path) - Edition ID (e.g., <code>bundesliga-2024-25</code>)</li>
                    </ul>
                    <strong>Response 200 OK:</strong>
                    <pre><code>{
  "id": "bundesliga-2024-25",
  "name": "Bundesliga 2024/25",
  "description": "Alle 18 Stadien der Bundesliga Saison 2024/25",
  "type": "free",
  "version": "1.0.0",
  "icon": "âš½",
  "unlock_conditions": { ... },
  "parent_editions": ["bundeslaender", "deutschland", "europa"],
  "locations": [
    {
      "id": "allianz-arena",
      "name": "Allianz Arena",
      "coordinates": [48.2188, 11.6247],
      "metadata": {
        "team": "FC Bayern MÃ¼nchen",
        "city": "MÃ¼nchen",
        "state": "Bayern",
        "capacity": 75000,
        "opened": 2005
      },
      "points": {
        "pee": 10,
        "poop": 25
      }
    }
  ]
}</code></pre>
                </div>

                <!-- Track Analytics -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="badge post">POST</span>
                        <h3>/api/analytics/track</h3>
                    </div>
                    <p>Track an analytics event (visit, download, etc.).</p>
                    <strong>Request Body:</strong>
                    <pre><code>{
  "event": "visit_recorded",
  "edition_id": "bundesliga-2024-25",
  "location": "Allianz Arena",
  "type": "pinkeln",
  "points": 10,
  "timestamp": "2024-11-10T15:30:00.000Z"
}</code></pre>
                    <strong>Response 200 OK:</strong>
                    <pre><code>{
  "success": true
}</code></pre>
                </div>

                <!-- Get Analytics Stats -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="badge get">GET</span>
                        <h3>/api/analytics/stats</h3>
                    </div>
                    <p>Returns aggregated analytics statistics.</p>
                    <strong>Response 200 OK:</strong>
                    <pre><code>{
  "total_events": 150,
  "events_by_type": {
    "visit_recorded": 120,
    "edition_downloaded": 20,
    "edition_activated": 10
  },
  "events_by_edition": {
    "bundesliga-2024-25": 50,
    "2-bundesliga-2024-25": 30,
    "weihnachtsmaerkte-2024": 20
  },
  "recent_events": [ ... ]
}</code></pre>
                </div>

                <h2 id="api-models">Data Models</h2>

                <h3>EditionMetadata</h3>
                <pre><code>interface EditionMetadata {
  id: string;
  name: string;
  description: string;
  type: 'free' | 'premium' | 'seasonal';
  version: string;
  icon: string;
  unlock_conditions: UnlockConditions;
  parent_editions: string[];
  locations_count: number;
}</code></pre>

                <h3>Location</h3>
                <pre><code>interface Location {
  id: string;
  name: string;
  coordinates: [number, number]; // [latitude, longitude]
  metadata: Record&lt;string, any&gt;; // Edition-specific data
  points: {
    pee: number;
    poop: number;
  };
}</code></pre>

                <h3>UnlockConditions</h3>
                <pre><code>interface UnlockConditions {
  payment_required: boolean;
  date_range: {
    start: string; // ISO date
    end: string;   // ISO date
  } | null;
  requires_editions: string[]; // Edition IDs
}</code></pre>

                <h2 id="api-editions">VerfÃ¼gbare Editionen</h2>

                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Typ</th>
                            <th>Locations</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>bundesliga-2024-25</td><td>Bundesliga 2024/25</td><td><span class="badge free">free</span></td><td>18</td></tr>
                        <tr><td>2-bundesliga-2024-25</td><td>2. Bundesliga 2024/25</td><td><span class="badge free">free</span></td><td>18</td></tr>
                        <tr><td>bundeslaender</td><td>BundeslÃ¤nder</td><td><span class="badge free">free</span></td><td>16</td></tr>
                        <tr><td>deutschland</td><td>Deutschland</td><td><span class="badge free">free</span></td><td>1</td></tr>
                        <tr><td>europa</td><td>Europa</td><td><span class="badge free">free</span></td><td>20</td></tr>
                        <tr><td>weihnachtsmaerkte-2024</td><td>WeihnachtsmÃ¤rkte 2024</td><td><span class="badge seasonal">seasonal</span></td><td>15</td></tr>
                        <tr><td>autobahnraststaetten</td><td>AutobahnraststÃ¤tten</td><td><span class="badge free">free</span></td><td>15</td></tr>
                        <tr><td>bahnhoefe</td><td>BahnhÃ¶fe</td><td><span class="badge free">free</span></td><td>15</td></tr>
                        <tr><td>fastfood-ketten</td><td>Fastfood-Ketten</td><td><span class="badge free">free</span></td><td>15</td></tr>
                        <tr><td>tankstellen</td><td>Tankstellen</td><td><span class="badge free">free</span></td><td>12</td></tr>
                        <tr><td>fan-kneipen</td><td>Fan-Kneipen & Pubs</td><td><span class="badge premium">premium</span></td><td>12</td></tr>
                    </tbody>
                </table>
            </section>

            <!-- SETUP SECTION -->
            <section id="setup">
                <h1>Client Setup Guide</h1>
                <p>Anleitung zum Erstellen eines HTML/JS Clients fÃ¼r KloGame.</p>

                <div class="info-box">
                    <strong>âœ… CORS ist aktiviert</strong><br>
                    Du kannst den Server von jedem Origin aus aufrufen (auch localhost).
                </div>

                <h2 id="setup-vanilla">Option 1: Vanilla HTML/JS</h2>

                <p>Erstelle eine einfache Projektstruktur:</p>
                <pre><code>klogame-client/
â”œâ”€â”€ index.html
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.js
â”‚   â””â”€â”€ api.js
â””â”€â”€ styles.css</code></pre>

                <h3>index.html</h3>
                <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="de"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;title&gt;KloGame&lt;/title&gt;
  &lt;link rel="stylesheet" href="styles.css"&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="app"&gt;
    &lt;h1&gt;KloGame&lt;/h1&gt;
    &lt;div id="editions"&gt;&lt;/div&gt;
  &lt;/div&gt;

  &lt;script type="module" src="src/app.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                <h3>src/api.js</h3>
                <pre><code>const API_URL = 'http://localhost:3000';

export async function getEditions() {
  const res = await fetch(`${API_URL}/api/editions`);
  const data = await res.json();
  return data.editions;
}

export async function downloadEdition(editionId) {
  const res = await fetch(`${API_URL}/api/editions/${editionId}/download`);
  return await res.json();
}

export async function trackVisit(editionId, location, type, points) {
  await fetch(`${API_URL}/api/analytics/track`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      event: 'visit_recorded',
      edition_id: editionId,
      location: location,
      type: type,
      points: points
    })
  });
}</code></pre>

                <h3>src/app.js</h3>
                <pre><code>import { getEditions, downloadEdition } from './api.js';

async function init() {
  const editions = await getEditions();
  console.log('Available editions:', editions);

  const container = document.getElementById('editions');
  editions.forEach(edition => {
    const div = document.createElement('div');
    div.innerHTML = `
      &lt;h3&gt;${edition.icon} ${edition.name}&lt;/h3&gt;
      &lt;p&gt;${edition.description}&lt;/p&gt;
      &lt;p&gt;Locations: ${edition.locations_count}&lt;/p&gt;
      &lt;button onclick="loadEdition('${edition.id}')"&gt;Load&lt;/button&gt;
    `;
    container.appendChild(div);
  });
}

window.loadEdition = async (editionId) => {
  const edition = await downloadEdition(editionId);
  console.log('Loaded edition:', edition);
  // TODO: Display on map
};

init();</code></pre>

                <h2 id="setup-typescript">Option 2: Mit TypeScript</h2>

                <pre><code>npm init -y
npm install -D typescript vite
npm install

npx tsc --init</code></pre>

                <h3>src/main.ts</h3>
                <pre><code>import { KloGameClient, Edition } from './types';

const client = new KloGameClient('http://localhost:3000');

async function init() {
  const editions = await client.getEditions();
  console.log('Editions:', editions);
}

init();</code></pre>

                <h2 id="setup-react">Option 3: React</h2>

                <pre><code>npx create-react-app klogame-client
cd klogame-client
npm start</code></pre>

                <h3>src/App.js</h3>
                <pre><code>import { useState, useEffect } from 'react';

const API_URL = 'http://localhost:3000';

function App() {
  const [editions, setEditions] = useState([]);

  useEffect(() => {
    fetch(`${API_URL}/api/editions`)
      .then(res => res.json())
      .then(data => setEditions(data.editions));
  }, []);

  return (
    &lt;div className="App"&gt;
      &lt;h1&gt;KloGame&lt;/h1&gt;
      {editions.map(edition => (
        &lt;div key={edition.id}&gt;
          &lt;h3&gt;{edition.icon} {edition.name}&lt;/h3&gt;
          &lt;p&gt;{edition.description}&lt;/p&gt;
        &lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
}

export default App;</code></pre>

                <h2 id="setup-map">Map Integration (Leaflet.js)</h2>

                <p>FÃ¼ge Leaflet zu deinem Projekt hinzu:</p>
                <pre><code>&lt;link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" /&gt;
&lt;script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"&gt;&lt;/script&gt;</code></pre>

                <h3>Map erstellen:</h3>
                <pre><code>import L from 'leaflet';

// Initialize map
const map = L.map('map').setView([51.1657, 10.4515], 6); // Germany center

// Add tile layer
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: 'Â© OpenStreetMap contributors'
}).addTo(map);

// Load edition and add markers
const edition = await downloadEdition('bundesliga-2024-25');
edition.locations.forEach(location => {
  const marker = L.marker(location.coordinates)
    .bindPopup(`
      &lt;b&gt;${location.name}&lt;/b&gt;&lt;br&gt;
      ${location.metadata.team}&lt;br&gt;
      Pinkeln: ${location.points.pee} | Kacken: ${location.points.poop}
    `)
    .addTo(map);

  marker.on('click', () => {
    trackVisit(edition.id, location.name, 'pinkeln', location.points.pee);
  });
});</code></pre>

                <h2>LocalStorage / IndexedDB</h2>

                <h3>LocalStorage (einfach)</h3>
                <pre><code>// Save edition
localStorage.setItem('edition-bundesliga', JSON.stringify(edition));

// Load edition
const saved = JSON.parse(localStorage.getItem('edition-bundesliga'));</code></pre>

                <h3>Beispiel-Workflow</h3>
                <pre><code>// 1. App startet
const client = new KloGameClient('http://localhost:3000');

// 2. Lade verfÃ¼gbare Editionen
const editions = await client.getEditions();

// 3. User wÃ¤hlt Edition
const edition = await client.downloadEdition('bundesliga-2024-25');

// 4. Speichere Edition offline
localStorage.setItem('edition-bundesliga', JSON.stringify(edition));

// 5. Zeige Locations auf Karte
edition.locations.forEach(loc => {
  addMarkerToMap(loc);
});

// 6. User klickt auf Location
await client.recordVisit('bundesliga-2024-25', 'Allianz Arena', 'kacken', 25);

// 7. Update Statistiken
const stats = await client.getStats();
updateStatsUI(stats);</code></pre>
            </section>

            <!-- TYPES SECTION -->
            <section id="types">
                <h1>TypeScript Types</h1>
                <p>Use these types in your client application for type safety.</p>

                <h2 id="types-edition">Edition Types</h2>

                <h3>EditionType</h3>
                <pre><code>export type EditionType = 'free' | 'premium' | 'seasonal';</code></pre>

                <h3>UnlockConditions</h3>
                <pre><code>export interface UnlockConditions {
  payment_required: boolean;
  date_range: {
    start: string; // ISO date string
    end: string;   // ISO date string
  } | null;
  requires_editions: string[]; // Edition IDs
}</code></pre>

                <h3>EditionMetadata</h3>
                <pre><code>export interface EditionMetadata {
  id: string;
  name: string;
  description: string;
  type: EditionType;
  version: string;
  icon: string;
  unlock_conditions: UnlockConditions;
  parent_editions: string[];
  locations_count: number;
}</code></pre>

                <h3>Location</h3>
                <pre><code>export interface Location {
  id: string;
  name: string;
  coordinates: [number, number]; // [latitude, longitude]
  metadata: Record&lt;string, any&gt;;
  points: {
    pee: number;
    poop: number;
  };
}</code></pre>

                <h3>Edition</h3>
                <pre><code>export interface Edition extends EditionMetadata {
  locations: Location[];
}</code></pre>

                <h2 id="types-analytics">Analytics Types</h2>

                <h3>VisitType</h3>
                <pre><code>export type VisitType = 'pinkeln' | 'kacken';</code></pre>

                <h3>AnalyticsEvent</h3>
                <pre><code>export interface AnalyticsEvent {
  event: string;
  edition_id?: string;
  location?: string;
  type?: VisitType;
  points?: number;
  timestamp?: string;
  [key: string]: any; // Allow additional fields
}</code></pre>

                <h3>AnalyticsStats</h3>
                <pre><code>export interface AnalyticsStats {
  total_events: number;
  events_by_type: Record&lt;string, number&gt;;
  events_by_edition: Record&lt;string, number&gt;;
  recent_events: SavedAnalyticsEvent[];
}</code></pre>

                <h2 id="types-client">KloGameClient Class</h2>

                <pre><code>export class KloGameClient {
  private apiUrl: string;

  constructor(apiUrl: string = 'http://localhost:3000') {
    this.apiUrl = apiUrl;
  }

  // Get all editions (metadata only)
  async getEditions(): Promise&lt;EditionMetadata[]&gt; { ... }

  // Get edition details (metadata only, no locations)
  async getEditionDetails(editionId: string): Promise&lt;EditionMetadata&gt; { ... }

  // Download full edition with all locations
  async downloadEdition(editionId: string): Promise&lt;Edition&gt; { ... }

  // Track analytics event
  async trackEvent(event: AnalyticsEvent): Promise&lt;TrackEventResponse&gt; { ... }

  // Get analytics statistics
  async getStats(): Promise&lt;AnalyticsStats&gt; { ... }

  // Helper: Record a visit
  async recordVisit(
    editionId: string,
    locationId: string,
    locationName: string,
    type: VisitType,
    points: number
  ): Promise&lt;TrackEventResponse&gt; { ... }
}</code></pre>

                <h3>Beispiel-Verwendung</h3>
                <pre><code>// Initialize client
const client = new KloGameClient('http://localhost:3000');

// Get all editions
const editions = await client.getEditions();
console.log(editions);

// Download specific edition
const bundesliga = await client.downloadEdition('bundesliga-2024-25');
console.log(bundesliga.locations);

// Record a visit
await client.recordVisit(
  'bundesliga-2024-25',
  'allianz-arena',
  'Allianz Arena',
  'kacken',
  25
);

// Get stats
const stats = await client.getStats();
console.log(`Total events: ${stats.total_events}`);</code></pre>
            </section>
        </main>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Highlight active section in navigation
        const sections = document.querySelectorAll('section, h2, h3');
        const navLinks = document.querySelectorAll('.nav-link');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= (sectionTop - 200)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
